<header
  class="flex fixed flex-wrap sm:justify-start sm:flex-nowrap items-center z-50 w-full text-sm py-3 min-h-20  text-white bg-color">
  <nav class="max-w-[85rem] w-full mx-auto px-4 md:px-6 lg:px-8" aria-label="Global">
    <div class="relative sm:flex sm:items-center">
     <div class="flex items-center justify-between w-full">
      <img src="/assets/img/logo-ut.png" alt="Logo" class="h-10" />
      <div class="flex items-center space-x-8 sm:space-x-4">
        <a class="text-xl font-bold text-white" routerLink="">TRANSPARENCIA</a>
      </div>
      <div class="sm:hidden">
        <button type="button" class="hs-collapse-toggle p-2 inline-flex justify-center items-center gap-x-2 rounded-lg border border-gray-200 text-white shadow-sm disabled:opacity-50 disabled:pointer-events-none" data-hs-collapse="#navbar-hover-event" aria-controls="navbar-hover-event" aria-label="Toggle navigation">
          <svg class="hs-collapse-open:hidden flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="18" y2="18"/></svg>
          <svg class="hs-collapse-open:block hidden flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
    </div>
      <div id="navbar-hover-event" class="hidden hs-collapse overflow-hidden transition-all duration-300 basis-full grow sm:block">
        <div class="flex flex-col gap-y-3 sm:gap-y-0 mt-5 sm:flex-row sm:items-center sm:justify-end sm:mt-0 sm:ps-5">
          <a class="font-medium mx-3" routerLink="/articulo33" routerLinkActive="underline" >Articulo 33</a>

          <div class="hs-dropdown [--strategy:static] sm:[--strategy:absolute] [--adaptive:none] sm:[--trigger:hover] ">
            <button type="button" class="flex items-center w-fullfont-medium mx-3" *ngIf="sesionActiva">
              Panel del administrador
              <svg class="flex-shrink-0 ms-2 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
            </button>
            <div class="hs-dropdown-menu transition-[opacity,margin] duration-[0.1ms] md:duration-[150ms] hs-dropdown-open:opacity-100 opacity-0 w-full hidden z-10 top-full start-0 min-w-60 bg-white md:shadow-2xl rounded-lg py-2 md:p-4 before:absolute before:-top-5 before:start-0 before:w-full before:h-5">
              <div class="md:grid md:grid-cols-2 lg:grid-cols-2 gap-4">
                <div class="flex flex-col mx-1 md:mx-0">
                  <a class="group flex gap-x-5 hover:bg-gray-100 rounded-lg p-4" routerLink="/puntos" routerLinkActive="bg-gray-100">
                    <svg class="flex-shrink-0 size-5 mt-1 text-primary-color" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                    <div class="grow">
                      <p class="font-medium text-gray-800">Administrar puntos</p>
                      <p class="text-sm text-gray-500 group-hover:text-gray-800">La lista de puntos con sus detalles</p>
                    </div>
                  </a>

                  <a class="group flex gap-x-5 hover:bg-gray-100 rounded-lg p-4"  routerLink="/areas" routerLinkActive="bg-gray-100" *ngIf="administrador">
                    <svg class="flex-shrink-0 size-5 mt-1 text-primary-color" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="7" x="14" y="3" rx="1"/><path d="M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3"/></svg>
                    <div class="grow">
                      <p class="font-medium text-gray-800">Administrar areas</p>
                      <p class="text-sm text-gray-500 group-hover:text-gray-800">La lista de areas registradas en el sistema.</p>
                    </div>
                  </a>

                  <a class="group flex gap-x-5 hover:bg-gray-100 rounded-lg p-4" routerLink="/trimestres" routerLinkActive="bg-gray-100" *ngIf="administrador">
                    <svg class="flex-shrink-0 size-5 mt-1 text-primary-color" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 11 2-2-2-2"/><path d="M11 13h4"/><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>
                    <div class="grow">
                      <p class="font-medium text-gray-800">Administrar trimestres</p>
                      <p class="text-sm text-gray-500 group-hover:text-gray-800">La lista de trimestres registrados en el sistema.</p>
                    </div>
                  </a>
                </div>

                <div class="flex flex-col mx-1 md:mx-0">
                  <a class="group flex gap-x-5 hover:bg-gray-100 rounded-lg p-4"  routerLink="/usuarios" routerLinkActive="bg-gray-100" *ngIf="administrador">
                    <svg class="flex-shrink-0 size-5 mt-1 text-primary-color" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    <div class="grow">
                      <p class="font-medium text-gray-800">Administrar usuarios</p>
                      <p class="text-sm text-gray-500 group-hover:text-gray-800">La lista de usuarios con acceso al sistema.</p>
                    </div>
                  </a>

                  <a class="group flex gap-x-5 hover:bg-gray-100 rounded-lg p-4" routerLink="/ejercicios" routerLinkActive="bg-gray-100" *ngIf="administrador">
                    <svg class="flex-shrink-0 size-5 mt-1 text-primary-color" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8"/></svg>
                    <div class="grow">
                      <p class="font-medium text-gray-800">Administrar ejercicios</p>
                      <p class="text-sm text-gray-500 group-hover:text-gray-800">La lista de ejercicios registrados en el sistema.</p>
                    </div>
                  </a>

                  <a class="group flex gap-x-5 hover:bg-gray-100 rounded-lg p-4" href="#">
                    <svg class="flex-shrink-0 size-5 mt-1 text-primary-color" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
                    <div class="grow">
                      <p class="font-medium text-gray-800">Manual del sistema</p>
                      <p class="text-sm text-gray-500 group-hover:text-gray-800">Una serie de instrucciones que explican el sistema.</p>
                    </div>
                  </a>
                </div>

              </div>
            </div>
          </div>
          <a type="button" *ngIf="administrador"
                    (click)="GetAllHistorialNoVistoService()"
                      class="m-1 ms-0 py-3 px-4 inline-flex items-center gap-x-2 text-sm rounded-lg border border-transparent
                      disabled:pointer-events-none relative"
                      data-hs-overlay="#hs-overlay-right"
                      [title]="mensajesNuevos">
                      Notificaciones 
                      <span *ngIf="mensajesNuevos" class="bg-red-500 rounded-full h-2 w-2 absolute right-0 top-0 mr-1 mt-1"></span>
                  </a>
          <a class="font-medium mx-3" routerLink="/login" routerLinkActive="underline" *ngIf="!sesionActiva">Iniciar sesión</a>
          <a class="font-medium mx-3" routerLink="/articulo33" *ngIf="sesionActiva" (click)="cerrarSesion()">Cerrar sesión</a>
        </div>
      </div>
    </div>
  </nav>
</header>

<div id="hs-overlay-right" class="hs-overlay hs-overlay-open:translate-x-0 hidden translate-x-full fixed top-0 end-0 transition-all duration-300 
transform h-full max-w-xs w-full z-[80] bg-white border-s" tabindex="-1">
  <div class="flex justify-between items-center py-3 px-4 border-b">
    <div> 
      <h3 class="font-bold text-gray-800 ">
      Notificaciones
    </h3>
    <a routerLink="/historial" class="hover:text-gray-500">ver más <i class="fa-solid fa-circle-chevron-down"></i></a>
    </div>
    
    <button  type="button" class="flex justify-center items-center size-7 text-sm font-semibold rounded-full border border-transparent 
    text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none"  data-hs-overlay="#hs-overlay-right">
      <span class="sr-only">Close modal</span>
      <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6 6 18"></path>
        <path d="m6 6 12 12"></path>
      </svg>
    </button>
  </div>
  <div class="p-4">
    <!-- Inicio de acordeones -->
    <ng-container *ngIf="ListHistorialActivos?.length === 0">
      <div class="min-h-60 flex flex-col bg-white rounded-xl">
        <div
          class="flex flex-auto flex-col justify-center items-center p-4 md:p-5"
        >
          <svg
            class="size-10 text-gray-500"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="22" x2="2" y1="12" y2="12"></line>
            <path
              d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"
            ></path>
            <line x1="6" x2="6.01" y1="16" y2="16"></line>
            <line x1="10" x2="10.01" y1="16" y2="16"></line>
          </svg>
          <p class="mt-2 text-sm text-gray-800">
            No hay nuevas modificaciónes.
          </p>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="ListHistorialActivos?.length! > 0">
      <div class="hs-accordion-group">
        <div *ngFor="let mensaje of ListHistorialActivos" class="hs-accordion" [id]="'hs-basic-with-arrow-heading-' + mensaje.id_historial">
          <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 py-3 inline-flex items-center gap-x-3 w-full font-semibold text-start 
          text-gray-800 hover:text-gray-500 rounded-lg disabled:opacity-50 disabled:pointer-events-none" 
          [attr.aria-controls]="'hs-basic-with-arrow-collapse-' + mensaje.id_historial"
          (click)="VerMensaje(mensaje.id_historial)"
          >
            <svg class="hs-accordion-active:hidden block size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
            <svg class="hs-accordion-active:block hidden size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m18 15-6-6-6 6"></path>
            </svg>
             Se realizó la siguiente acción {{ mensaje.accion }} - Hace {{ mensaje.tiempo_transcurrido }}
          </button>
          <div [id]="'hs-basic-with-arrow-collapse-' + mensaje.id_historial" class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300" [attr.aria-labelledby]="'hs-basic-with-arrow-heading-' + mensaje.id_historial">
            <p class="text-gray-80">
              Departamento responsable: {{mensaje.nombre_area}}
            </p>
            <hr>
            <p class="text-gray-80">
              {{ mensaje.descripcion }}
            </p>
          </div>
        </div>
      </div>
    </ng-container>
    
    <!-- Fin de acordeones -->
  </div>
</div>